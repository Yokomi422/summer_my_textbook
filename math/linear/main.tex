\documentclass{jlreq}

\usepackage{titlesec}
\usepackage{listings}
\usepackage{fancyhdr}

% \adjustbox
\usepackage{adjustbox}

% 数学
\usepackage{amssymb} 

% tcolorboxの設定
\usepackage[most]{tcolorbox} 
\tcbuselibrary{breakable}
\tcbuselibrary{skins}
\tcbuselibrary{listingsutf8}
% タイトルのフォーマットを変更
\titleformat{\title}
  {\centering\Huge\bfseries}
  {}
  {0em} 
  {}

\titleformat{\subtitle}
  {\centering\Large\itshape}
  {}
  {0em}
  {}

\titleformat{\subsubsection}[block]
  {\normalfont\normalsize\bfseries}
  {\arabic{subsubsection}.}
  {1em}
  {}

\titleformat{\section}[block]
  {\normalfont\large\bfseries}
  {\Roman{section}.}
  {1em} 
  {}
  [\titleline{\titlerule[1pt]}]

\titleformat{\subsection}[block]
  {\normalfont\normalsize\bfseries}
  {\roman{subsection}.}
  {1em}
  {}

% listingsの設定

\renewcommand{\lstlistingname}{コード}

\lstset{
	breaklines = true,
	language = Python,
	keywordstyle = {\bfseries \color[cmyk]{0,1,0,0}},
	commentstyle = {\itshape \color[cmyk]{1,0.4,1,0}},
	numbers = left,
	numberstyle = \tiny,
	stepnumber = 1,
	% frameとnumberの間の距離
	numbersep = 10pt,
	frame = single,
	basicstyle = \ttfamily,
	tabsize = 2,
	captionpos = t,
	backgroundcolor={\color[gray]{.90}},
	showstringspaces = false,
}

% headerの設定
\pagestyle{fancy}
\fancyhf{}

\fancyhead[RO,RE]{\rightmark}
\fancyhead[LO,LE]{\leftmark} 
\fancyfoot[C]{\thepage}

% tikzの設定
\usepackage{tikz}

% 定理環境
\newtcolorbox{theorembox}[1][]{
    enhanced,
    colback=white!95!green,
    colframe=green!40!black,
    coltitle=black,
    fonttitle=\bfseries,
    title=#1,
    attach boxed title to top left={yshift=-2mm, xshift=2mm},
    boxed title style={colback=green!30!white, size=small},
    drop fuzzy shadow,
    boxrule=0.5mm,
    sharp corners,
    top=4mm, bottom=4mm,
}

% 定義用のボックス環境
\newtcolorbox{definitionbox}[1][]{
    enhanced,
    title=#1, 
    attach boxed title to top left, 
    colback=white!95!blue,
    colbacktitle=white!10!blue!50!black,
    drop fuzzy shadow,
    boxrule=0.25mm,
}

% 問題用のボックス環境
\newtcolorbox{problem}[1][]{enhanced,
  colback=white!85!gray,
  drop fuzzy shadow,
  boxrule=0.3mm,
  arc=0mm,
  left=0pt,
  top=0pt,
  sharp corners,
  width=\textwidth,
  title=\textbf{問題},
  #1
}

\begin{document}

\section{ベクトル空間}
\subsection{数ベクトル空間}
% タイトルの独立
\begin{tcolorbox}[enhanced,title=ベクトル空間の公理, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  空でない集合$V$上に加法およびスカラー倍が定義され、以下の法則が満たされているとき、$V$を\textbf{数ベクトル空間}という。

  \begin{itemize}
    \item 加法について
    \begin{enumerate}
      \item $\boldsymbol{u} + \boldsymbol{v} = \boldsymbol{v} + \boldsymbol{u}$
      \item $(\boldsymbol{u} + \boldsymbol{v}) + \boldsymbol{w} = \boldsymbol{u} + (\boldsymbol{v} + \boldsymbol{w})$
      \item $V$の中に0で表せられる1つの元があって、$V$上の任意の元$v$に対して$v + 0 = v$が成り立つ
      \item $V$の任意の元$v$に対して、$v + v' = 0$となる元$v'$が存在する
    \end{enumerate}
    \item スカラー倍について
    \begin{enumerate}
      \item $c(u + v) = cu + cv$
      \item $(c + d)v = cv + dv$
      \item $c(dv) = (cd)v$
      \item $1v = v$
    \end{enumerate}
    \end{itemize}
\end{tcolorbox}

$V$がベクトル空間であるとき、その元を\textbf{ベクトル}という。

\begin{tcolorbox}[enhanced,title=部分空間, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  $V$の部分集合$W$は以下の条件を満たすとき、$V$の\textbf{部分空間}であるという。

  \begin{enumerate}
    \item $W$は$V$の零元を含む
    \item $u, v \in W$ならば$u + v \in W$
    \item $u \in W, c \in \mathbb{R}$ならば$cu \in W$
  \end{enumerate}
\end{tcolorbox}

例えば、$\mathbb{R}^2$は$\mathbb{R}^3$の部分空間である。また、原点を通る直線は$\mathbb{R}^2$の部分空間である。

\begin{definitionbox}[線型結合・一次結合]
  $V$をベクトル空間とし、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$を$V$のベクトルとする。$c_1, c_2, \cdots, c_n$を実数として、
  \begin{equation*}
    c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n}
  \end{equation*}
  の形で表せられる$V$のベクトルを$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$の\textbf{線型結合}という。 \\
\end{definitionbox}

\begin{theorembox}[定理1]
  $V$をベクトル空間とし、その元$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$の線型結合で表せられる全てのベクトルの集合を$W$とする。このとき、$W$は$V$の部分空間である。

  \begin{equation*}
    W := \{ c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} | c_1, c_2, \cdots, c_n \in \mathbb{R} \}
  \end{equation*}

  \dotfill

  \textbf{証明} \\

  $\boldsymbol{0} = 0 \boldsymbol{v_1} + 0 \boldsymbol{v_2} + \cdots + 0 \boldsymbol{v_n}$であるから、$W$は零元を含む。また、$u, v \in W$とすると、
  \begin{align*}
    u &= c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} \\
    v &= d_1 \boldsymbol{v_1} + d_2 \boldsymbol{v_2} + \cdots + d_n \boldsymbol{v_n}
  \end{align*}
  と表せる。このとき、$u + v$は
  \begin{equation*}
    u + v = (c_1 + d_1) \boldsymbol{v_1} + (c_2 + d_2) \boldsymbol{v_2} + \cdots + (c_n + d_n) \boldsymbol{v_n}
  \end{equation*}

  と表せるので、$u + v \in W$である。また、$u \in W, c \in \mathbb{R}$とすると、$cu$は

  \begin{equation*}
    cu = (cc_1) \boldsymbol{v_1} + (cc_2) \boldsymbol{v_2} + \cdots + (cc_n) \boldsymbol{v_n}
  \end{equation*}

  と表せるので、$cu \in W$である。以上より、$W$は$V$の部分空間である。
\end{theorembox}


\begin{definitionbox}[線型結合の張る空間]
  $V$をベクトル空間とし、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$を$V$のベクトルとする。これらのベクトルたちにより生成される\{$\sum_{i=1}^m c_i \boldsymbol{v_i} | c_i \in \mathbb{R}$\}を
  $\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$によって生成される$\mathbb{R}$の部分空間といい、以下のように書く。

  \begin{equation*}
    <\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n} >
  \end{equation*}
\end{definitionbox}

\begin{definitionbox}[線形独立と線形従属]
  $V$をベクトル空間とし、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$を$V$のベクトルとする。$c_1, c_2, \cdots, c_n$を実数として、
  \begin{equation*}
    c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} = \boldsymbol{0}
  \end{equation*}
  が$c_1 = c_2 = \cdots = c_n = 0$に限られるとき、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$は\textbf{線形独立}であるという。 \\
  逆に、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$が線形独立でないとき、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$は\textbf{線形従属}であるという。
\end{definitionbox}

\begin{theorembox}[定理2]
  「$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n+1}}$が一次独立である」ことと、
  「$\boldsymbol{v_1}, \cdots \boldsymbol{v_n}$が一次独立かつ$\boldsymbol{v_{n + 1}} \notin <\boldsymbol{v_1, \cdots \boldsymbol{v_n}}>$」であることは同値である。

  \dotfill

  \textbf{証明} \\
  $\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n + 1}}$が一次独立であるとする。このとき、$\boldsymbol{v_{n+1}}$が$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n + 1}}$の線形結合で表せられるとすると、
  \begin{equation*}
    c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} + c_{n+1} \boldsymbol{v_{n + 1}} = \boldsymbol{0}
  \end{equation*}
  を満たす$c_i$は$c_1 = c_2 = \cdots = c_n = c_{n + 1} = 0$である。よって、$c_1 = c_2 = \cdots = c_n = 0$が成り立つので、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$は一次独立である。また
  、$\boldsymbol{v_{n + 1}} \in <v_1, \cdots \boldsymbol{v_n>}$であると仮定すると、$\boldsymbol{v_{n + 1}}$は$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$の線形結合で表せられると仮定する。このとき、$v_{n +1} = c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n}$となり、
  $c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} + (-1) \boldsymbol{v_{n + 1}} = \boldsymbol{0}$となる。よって、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n + 1}}$は一次独立であることに矛盾するため、$\boldsymbol{v_{n + 1}} \notin <\boldsymbol{v_1}, \cdots \boldsymbol{v_n}>$である。

  逆に、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$が一次独立かつ$\boldsymbol{v_{n + 1}} \notin <\boldsymbol{v_1, \cdots \boldsymbol{v_n}}>$であるとする。このとき、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n + 1}}$が線形従属であるとすると、,もし
  $c_{n + 1} \neq 0$であると仮定すると、
  \begin{equation*}
    c_{n + 1} = - \frac{c_1}{c_{n + 1}} \boldsymbol{v_1} - \frac{c_2}{c_{n + 1}} \boldsymbol{v_2} - \cdots - \frac{c_n}{c_{n + 1}} \boldsymbol{v_n}
  \end{equation*}
  となってしまい、家庭と矛盾するよって、$c_{n + 1} = 0$である。よって、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}, \boldsymbol{v_{n + 1}}$は一次独立である。
\end{theorembox}
以上の定理より、一次独立なベクトルの組みを作るときは、そのベクトルが生成する空間に含まれないベクトルを選ぶことで、線形独立なベクトルの組みを作ることができる。

\begin{definitionbox}[基底]
  $V$をベクトル空間とし、$\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$を$V$のベクトルとする。任意のベクトル$\boldsymbol{x} \in V$が$c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n}$の形で一意に表せられるとき、
  $\boldsymbol{v_1}, \boldsymbol{v_2}, \cdots, \boldsymbol{v_n}$は$V$の\textbf{基底}であるという。 \\
\end{definitionbox}

\begin{theorembox}[定理3]
  「$v_1, v_2, \cdots, v_n$が$V$の基底である」ことと、「$v_1, v_2, \cdots, v_n$が一次独立であり、$V$の任意のベクトルが$v_1, v_2, \cdots, v_n$の線形結合で表せられる」ことは同値である。

  \dotfill

  \textbf{証明} \\

  $v_1, v_2, \cdots, v_n$が$V$の基底であるとする。このとき、$V = <v_1, v_2, \cdots, v_n>$は明らか。
  $c_1 \boldsymbol{v_1} + c_2 \boldsymbol{v_2} + \cdots + c_n \boldsymbol{v_n} = \boldsymbol{0}$となる$c_i$は$c_1 = c_2 = \cdots = c_n = 0$であるから、$v_1, v_2, \cdots, v_n$は一次独立である。

  逆に、任意の$\boldsymbol{x} \in V$が$v_1, v_2, \cdots, v_n$の線形結合で表せられるとする。
  \begin{equation*}
    k_1 \boldsymbol{v_1} + k_2 \boldsymbol{v_2} + \cdots + k_n \boldsymbol{v_n} = l_1 \boldsymbol{v_1} + l_2 \boldsymbol{v_2} + \cdots + l_n \boldsymbol{v_n}
  \end{equation*}
  とすると一次独立であるから、$k_1 = l_1, k_2 = l_2, \cdots, k_n = l_n$である。よって、$v_1, v_2, \cdots, v_n$は$V$の基底である。
\end{theorembox}

\begin{theorembox}[定理4]
  $a_1, a_2, \cdots, a_n$と$b_1, b_2, \cdots, b_m$が$V$の基底であるとする。このとき、$n = m$である。

  \dotfill

  \textbf{証明} \\

  $b_{i1} \notin <a_2, a_3, \cdots, a_n>$となる$b_{i1}$が存在する。
\end{theorembox}

\begin{definitionbox}

\end{definitionbox}

\section{固有値}


\section{対角化}
\begin{tcolorbox}[enhanced,title=定義1 行列の対角化, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  正方行列$A$が対角化可能であるとは、ある正則行列$P$が存在して、$P^{-1}AP$が対角行列になることをいう。 \\
  正方行列$A$が$P = (\boldsymbol{x_1}, \boldsymbol{x_2} \cdots \boldsymbol{x_n})$で以下のように対角化されるとき、
  \begin{equation*}
    P^{-1}AP = \begin{pmatrix}
      \lambda_1 & 0 & \cdots & 0 \\
      0 & \lambda_2 & \cdots & 0 \\
      \vdots & \vdots & \ddots & \vdots \\
      0 & 0 & \cdots & \lambda_n
  \end{pmatrix}
  \end{equation*}
  \begin{itemize}
    \item $\lambda_1, \lambda_2, \cdots, \lambda_n$は$A$の固有値
    \item $\boldsymbol{x_1}, \boldsymbol{x_2}, \cdots, \boldsymbol{x_n}$は対応する固有値$\lambda_i$の固有ベクトル
  \end{itemize}
\end{tcolorbox}

\begin{tcolorbox}[enhanced,
  colback=white!85!gray,
  drop fuzzy shadow,
  boxrule=0.3mm,
  arc=0mm,
  left=0pt,
  top=0pt,
  sharp corners,
  width=\textwidth,
  ]
  \textbf{問題 1} \\
  以下の行列$A$を対角化せよ。

  \begin{equation*}
    A = \begin{pmatrix}
      8 & -10 \\
      5 & 7
    \end{pmatrix}
  \end{equation*}
\tcblower

\begin{tcolorbox}[
  coltext=white!10!blue,
  colback=white!90!purple!90!blue,
  drop fuzzy shadow,
  boxrule=0mm,
  arc=0mm,
  width=1.3cm,
  left=0pt,
  right=0pt,
  top=0pt,
  bottom=0pt,
  halign=flush left,
]
\end{tcolorbox}
\tcblower
\textbf{回答:}

まずは行列$A$の固有値を求めます。固有値は以下の式を解くことで求めることができます。
\begin{equation*}
  |\lambda I - A| = 0  (I: 単位行列)
\end{equation*}

これを解くと、$\lambda_1 = -2, \lambda_2 = 3$になります。次に固有ベクトルをそれぞれ求めます。$(\lambda I - A) \boldsymbol{x} = 0$
に固有値を代入してこの方程式を満たすベクトルを求めることで固有ベクトルを求めることができます。よって$\lambda_1, \lambda_2$に対応する固有ベクトルはそれぞれ
$\left ( \begin{matrix} 1 \\ 1 \end{matrix}\right)$, $\left ( \begin{matrix} 2 \\ 1 \end{matrix}\right)$になります。 \\
したがって、$P = \begin{pmatrix} 1 & 2 \\ 1 & 1 \end{pmatrix}$とすることで、行列$A$は以下のように対角化されます。

\begin{equation*}
  P^{-1}AP = \begin{pmatrix}
    -2 & 0 \\
    0 & 3
  \end{pmatrix}
\end{equation*}

\end{tcolorbox}% タイトルの独立

\subsection{対角化の応用}

\subsubsection{ケーリー・ハミルトンの定理}
\begin{tcolorbox}[enhanced,title=ケーリー・ハミルトンの定理, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  $O_n, I_n$をそれぞれ$n$次の零行列、単位行列とする。$A$を$n$次正方行列とすると、その固有多項式$p_A(\lambda) = \det (\lambda I_n - A)$
  の$\lambda$に$A$を代入したものは零行列に等しい。すなわち、

  \begin{equation*}
    p_A(A) = O_n
  \end{equation*}
\end{tcolorbox}

\subsubsection{行列の累乗}

\section{三角化}

\begin{tcolorbox}[enhanced,title=定義1 行列の三角化, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  任意の正方行列$A$に対して、ある正則行列$P$が存在して、$P^{-1}AP$が上三角行列になる。対角成分
  $a_{11}, a_{22} \cdots a_{nn}$は$A$の固有値である。このように上三角行列に変換することを\textbf{三角化}という。
  \begin{equation}
    P^{-1} A P = 
    \begin{pmatrix}
    a_{11} & a_{12} & a_{13} & \cdots & a_{1n} \\
    0      & a_{22} & a_{23} & \cdots & a_{2n} \\
    0      & 0      & a_{33} & \cdots & a_{3n} \\
    \vdots & \vdots & \vdots & \ddots & \vdots \\
    0      & 0      & 0      & \cdots & a_{nn}
    \end{pmatrix}
    \end{equation}
\end{tcolorbox}




\section{二次形式}

\begin{tcolorbox}[enhanced,title=定義2 二次形式, 
  attach boxed title to top left, 
  colback=white!95!blue,
  colbacktitle=white!10!blue!50!black,
  drop fuzzy shadow,
  boxrule=0.25mm,
  ]
  実数係数の多項式ですべての項が2次のものを\textbf{二次形式}という。 \\
  二次形式は対称行列$A$を用いて以下のように表せる。 
  \begin{equation*}
    \left(
      \begin{matrix}
        x_1 & x_2 & \cdots & x_n
      \end{matrix}
    \right)
    A
    \left(
      \begin{matrix}
        x_1 \\
        x_2 \\
        \vdots \\
        x_n
      \end{matrix}
    \right) = \boldsymbol{x}^T A \boldsymbol{x}
  \end{equation*}
\end{tcolorbox}

\textbf{具体例} \\
(1) 二次形式の例 \\
\begin{align*}
  x_1^2 + 2 x_2 ^2 - 8 x_3 ^2 + 4 x_1 x_2 - 5 x_1 x_3 + 6 x_2 x_3 
  &= \begin{pmatrix}
    x_1 & x_2 & x_3
  \end{pmatrix}
  \begin{pmatrix}
    1 & 2 & - \frac{5}{2} \\
    2 & 2 & 3 \\
    - \frac{5}{2} & 3 & -8
  \end{pmatrix}
  \begin{pmatrix}
    x_1 \\
    x_2 \\
    x_3
  \end{pmatrix}
\end{align*}

行列$A$は対称行列であることに注意すると、$A$の要素は$i = j$のときは$x_i^2$の係数、$i \neq j$のときは$\frac{1}{2}x_i x_j$の係数となる。 \\

(2) 二次形式のでない例 \\
\begin{equation*}
  x_1^2 + 2 x_2^2 - 4x_1 x_2 + 6 x_1
\end{equation*}


\end{document}
